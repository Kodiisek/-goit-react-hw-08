import{u as p,j as e,l as u}from"./index-DGTopY6F.js";import{D as j}from"./DocumentTitle-DknESgfx.js";import{c as b,a as l,F as h,b as x,d as n,E as i}from"./index.esm-BTBxiRoC.js";const f="_form_1vlqj_1",_="_label_1vlqj_11",g="_input_1vlqj_19",v="_error_1vlqj_33",q="_button_1vlqj_39",s={form:f,label:_,input:g,error:v,button:q},w=b().shape({email:l().email("Invalid email address").required("Email is required"),password:l().min(7,"Password must be at least 7 characters").required("Password is required")}),N=()=>{const t=p(),m=(r,{resetForm:a,setSubmitting:c,setStatus:d})=>{t(u(r)).unwrap().then(o=>{console.log("Login successful"),localStorage.setItem("token",o.token),a()}).catch(o=>{d({error:o.message||"Login failed"})}).finally(()=>{c(!1)})};return e.jsx(h,{initialValues:{email:"",password:""},validationSchema:w,onSubmit:m,children:({isSubmitting:r,status:a})=>e.jsxs(x,{className:s.form,autoComplete:"off",children:[(a==null?void 0:a.error)&&e.jsx("div",{className:s.error,children:a.error}),e.jsxs("label",{className:s.label,children:["Email",e.jsx(n,{type:"email",name:"email",className:s.input}),e.jsx(i,{name:"email",component:"div",className:s.error})]}),e.jsxs("label",{className:s.label,children:["Password",e.jsx(n,{type:"password",name:"password",className:s.input}),e.jsx(i,{name:"password",component:"div",className:s.error})]}),e.jsx("button",{type:"submit",className:s.button,disabled:r,children:r?"Logging in...":"Log In"})]})})};function y(){return e.jsxs("div",{children:[e.jsx(j,{children:"Login"}),e.jsx(N,{})]})}export{y as default};
